@model IEnumerable<MyPortal.Models.Database.Student>
@{
    ViewBag.Title = "Students";
    Layout = "~/Views/Shared/_LayoutStaff.cshtml";
}

<!--#region Title-->
<div class="container float-left">
    <h2 class="mp-page-title">Students</h2>
    <hr/>
</div>
<!--#endregion-->
<!--#region Buttons at Top of Page-->
<div class="container float-left">
    @if (User.IsInRole("SeniorStaff"))
    {
        @Html.ActionLink("New Student", "NewStudent", "Staff", null, new {@class = "btn btn-success"})
        <hr/>
    }
</div>

<div class="float-left container">
    @Html.EJS().Grid("Students").DataSource(dataManager =>
    {
        dataManager.Url("/api/people/students/get/dataGrid/all").CrossDomain(false).Adaptor("UrlAdaptor"); 

    }).Columns(col =>
    {
        col.Field("DisplayName").HeaderText("Name").Template("#nameTemplate").Width("120").Add();
        col.Field("YearGroupName").HeaderText("Year Group").Width("120").Add();
        col.Field("RegGroupName").HeaderText("Reg Group").Width("120").Add();
    }).AllowPaging().SearchSettings(search => { search.Operator("contains").IgnoreCase(true); }).Toolbar(new List<string>() { "Search" }).PageSettings(pageSettings => pageSettings.PageSize(12)).Render()
</div>

<style type="text/css" class="cssStyles">
    .student-name {
        font-weight: bold;
    }
</style>

@section scripts
{
    <script>
        $(document).ready(function() {
        });
    </script>

    <script id="nameTemplate" type="text/x=template">
               <div class="student-name">
                   <a href="/Staff/People/Students/${Id}">${DisplayName}</a>
               </div>
    </script>

    @Scripts.Render("~/bundles/staff")
}