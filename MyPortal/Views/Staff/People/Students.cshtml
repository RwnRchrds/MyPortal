@model IEnumerable<MyPortal.Models.Database.Student>
@{
    ViewBag.Title = "Students";
    Layout = "~/Views/Shared/_LayoutStaff.cshtml";
}

<!--#region Title-->
<div class="container float-left">
    <h2 class="mp-page-title">Students</h2>
    <hr/>
</div>
<!--#endregion-->
<!--#region Buttons at Top of Page-->
<div class="container float-left">
    @if (User.IsInRole("SeniorStaff"))
    {
        @Html.ActionLink("New Student", "NewStudent", "Staff", null, new {@class = "btn btn-success"})
        <hr/>
    }
</div>

<div class="float-left container">
    @Html.EJS().Grid("Students").DataSource(dataManager =>
    {
        dataManager.Url("/api/people/students/get/dataGrid/all").CrossDomain(false).Adaptor("UrlAdaptor"); 

    }).Columns(col =>
    {
        col.Field("DisplayName").HeaderText("Name").Template("#nameTemplate").Width("300").Add();
        col.Field("YearGroupName").HeaderText("Year Group").Width("80").Add();
        col.Field("RegGroupName").HeaderText("Reg Group").Width("80").Add();
        col.Field("HouseName").HeaderText("House").Width("100").Add();
    }).AllowPaging().SearchSettings(search => { search.Operator("contains").IgnoreCase(true); }).Toolbar(new List<string>() { "Search" }).PageSettings(pageSettings => pageSettings.PageSize(12)).Render()
</div>

<style type="text/css" class="cssStyles">
    .student-name {
        font-weight: bold;
    }

    .blob {
        background-color: #e3165b;
        height: 27px;
        width: 29px;
        border-radius: 14px;
        text-align: center;
        color: white;
    }

    .blob-icon {
        margin-top: 6px;
    }
</style>

@section scripts
{
    <script>
        $(document).ready(function() {
        });
    </script>

    <script type="text/x-jsrender" id="nameTemplate">
        <div>
                <span id="Studtext" class="student-name"><a href="/Staff/People/Students/${Id}">${DisplayName}</a></span>
        </div>        
    </script>

    @Scripts.Render("~/bundles/staff")
}